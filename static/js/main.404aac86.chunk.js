(this["webpackJsonpnews-explorer"]=this["webpackJsonpnews-explorer"]||[]).push([[0],{28:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),o=n.n(r),c=n(18),s=n.n(c),i=n(8),l=(n(28),n(12)),u=n(10),d=n(2),p=n(3),b=o.a.createContext(),j=n.p+"static/media/logout-black.4fb874ec.svg",h=n.p+"static/media/logout-white.1f2ed6dd.svg";var m=function(e){var t=Object(r.useState)(0),n=Object(d.a)(t,2),o=n[0],c=n[1],s=Object(r.useState)(!1),l=Object(d.a)(s,2),u=l[0],p=l[1],m=Object(r.useContext)(b),_=function(){c(window.scrollY)};function O(){p(!1)}var f="".concat(e.isHeaderBlack?j:h);return Object(r.useEffect)((function(){return window.addEventListener("scroll",_),function(){return window.removeEventListener("scroll",_)}}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"header__overlay"+(u?" header__overlay_active":"")}),(e.isHeaderBlack||o<=350)&&Object(a.jsxs)("header",{className:"header"+(e.isHeaderBlack?" header_black-version":"")+(u?" header_opened-menu":""),children:[Object(a.jsx)(i.b,{className:"header__logo header__link"+(e.isHeaderBlack?" header__link_black-version header__logo_black-version":""),to:"/news-explorer-frontend",children:"NewsExplorer"}),u?Object(a.jsx)("button",{className:"header__menu-button"+(e.isHeaderBlack?" header__menu-button_close_black-version":"   header__menu-button_close"),onClick:O}):Object(a.jsx)("button",{className:"header__menu-button"+(e.isHeaderBlack?" header__menu-button_open_black-version":"   header__menu-button_open")+(e.isMobilePopupOpen?" header__menu-button_hidden":""),onClick:function(){p(!0)}}),Object(a.jsxs)("nav",{className:"header__nav"+(u?"":" header__nav_hidden"),children:[Object(a.jsx)(i.c,{activeClassName:e.isHeaderBlack?"header__link_active_black-version":"header__link_active",className:"header__main header__link"+(e.isHeaderBlack?" header__link_black-version":""),to:"/news-explorer-frontend",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e.isLogin&&Object(a.jsx)(i.c,{activeClassName:e.isHeaderBlack?"header__link_active_black-version":"header__link_active",className:"header__saved-news header__link"+(e.isHeaderBlack?" header__link_black-version":""),to:"/saved-news",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"}),!e.isLogin&&Object(a.jsx)("button",{className:"header__auth-button"+(e.isHeaderBlack?" header__auth-button_black-version":""),onClick:function(){O(),e.onMobilePopupOpen(),e.onPopupForSignup()},children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),e.isLogin&&Object(a.jsx)("button",{className:"header__auth-button"+(e.isHeaderBlack?" header__auth-button_black-version":""),onClick:e.onLogout,children:e.isLogin&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{className:"header__auth-name"+(e.isHeaderBlack?" header__auth-name_black-version":""),children:m.name}),Object(a.jsx)("img",{className:"header__logout-button",alt:"\u0412\u044b\u0445\u043e\u0434",src:f})]})})]})]})]})},_=n.p+"static/media/avatar.bdeec35a.jpg";var O=function(){var e=Object(r.useContext)(b);return Object(a.jsxs)("div",{className:"about",children:[Object(a.jsx)("img",{className:"about__avatar",alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",src:_}),Object(a.jsxs)("div",{className:"about__wrapper",children:[Object(a.jsx)("h2",{className:"about__title",children:"\u041e\u0431 \u0430\u0432\u0442\u043e\u0440\u0435"}),Object(a.jsxs)("p",{className:"about__text",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",e.name?e.name+",":""," \u043c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442 \u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d!",Object(a.jsx)("br",{}),"\u042d\u0442\u043e \u043c\u043e\u0439 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u043f\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044e \u043a\u0443\u0440\u0441\u0430 Frontend \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430. \u042d\u0442\u043e \u0441\u0435\u0440\u0432\u0438\u0441 - \u0430\u0433\u0440\u0435\u0433\u0430\u0442\u043e\u0440 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439.",Object(a.jsx)("br",{}),"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043a\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u0438 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0449\u0435\u0439 \u0432\u0430\u0441 \u0442\u0435\u043c\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0435\u0433\u043e API Newsapi.org. \u0421\u0435\u0439\u0447\u0430\u0441 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f, \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f, \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439 \u043d\u0430 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435, \u0442\u0430\u043a \u0447\u0442\u043e - \u0432\u043f\u0435\u0440\u0435\u0434, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435!",Object(a.jsx)("br",{}),"\u0420\u0430\u0434, \u0447\u0442\u043e \u0432\u044b \u0437\u0430\u0448\u043b\u0438)"]}),Object(a.jsxs)("p",{className:"about__github",children:["\u041a\u043e\u0434 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u043d\u0430 GitHub:",Object(a.jsxs)("div",{className:"about__github-link-wrap",children:[Object(a.jsx)("a",{className:"about__github-link",href:"https://github.com/BerezinKonstantin/news-explorer-frontend",rel:"noopener noreferrer",target:"_blank",children:"Frontend"}),Object(a.jsx)("a",{className:"about__github-link",href:"https://github.com/BerezinKonstantin/news-explorer-api",rel:"noopener noreferrer",target:"_blank",children:"Backend"})]})]})]})]})};var f=function(e){var t=o.a.useRef(),n=o.a.useRef(),r=o.a.useState(!1),c=Object(d.a)(r,2),s=c[0],i=c[1],l=o.a.useState(!0),u=Object(d.a)(l,2),p=u[0],b=u[1];return Object(a.jsxs)("div",{ref:n,className:"search-form",children:[Object(a.jsx)("h1",{className:"search-form__title",children:"\u0427\u0442\u043e \u0442\u0432\u043e\u0440\u0438\u0442\u0441\u044f \u0432 \u043c\u0438\u0440\u0435?"}),Object(a.jsx)("p",{className:"search-form__subtitle",children:"\u041d\u0430\u0445\u043e\u0434\u0438\u0442\u0435 \u0441\u0430\u043c\u044b\u0435 \u0441\u0432\u0435\u0436\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438 \u043d\u0430 \u043b\u044e\u0431\u0443\u044e \u0442\u0435\u043c\u0443 \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0439\u0442\u0435 \u0432 \u0441\u0432\u043e\u0451\u043c \u043b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435."}),Object(a.jsxs)("form",{className:"search-form__form",onSubmit:function(a){a.preventDefault(),e.onGetArticles(t.current.value),window.scrollTo(0,n.current.scrollHeight)},noValidate:!0,onMouseDown:function(){b(!1)},children:[!s&&!p&&Object(a.jsx)("span",{className:"search-form__error",children:"\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430"}),Object(a.jsxs)("div",{className:"search-form__input-wrapper",children:[Object(a.jsx)("input",{type:"text",id:"input-search",className:"search-form__input",name:"search",autoComplete:"off",ref:t,required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043c\u0443 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",minLength:"2",onChange:function(e){i(e.target.closest("form").checkValidity())}}),Object(a.jsx)("button",{className:"search-form__submit-button",type:"submit",disabled:!s,children:"\u0418\u0441\u043a\u0430\u0442\u044c"})]})]})]})};var g=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),o=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(d.a)(s,2),l=i[0],u=i[1],b=Object(p.h)().pathname,j="".concat("/news-explorer-frontend"===b?e.card.description:e.card.text),h="".concat("/news-explorer-frontend"===b?e.card.url:e.card.link),m="".concat("/news-explorer-frontend"===b?e.card.urlToImage:e.card.image),_="".concat("/news-explorer-frontend"===b?e.keyword:e.card.keyword),O="".concat("/news-explorer-frontend"===b?e.card.publishedAt:e.card.date),f="".concat("/news-explorer-frontend"===b?e.card.source.name:e.card.source);function g(){"/news-explorer-frontend"===b&&function(){if(e.isLogin&&!o&&"/news-explorer-frontend"===b){var t={link:e.card.url,keyword:e.keyword,title:e.card.title,text:e.card.description,date:e.card.publishedAt,source:e.card.source.name,image:e.card.urlToImage};e.onSaveArticle(t),c(!0)}}(),"/saved-news"===b&&(e.onDeleteArticle(e.card._id),c(!1))}function x(){u(!l)}return Object(r.useEffect)((function(){c(!1)}),[e]),Object(a.jsxs)("li",{className:"card",children:[Object(a.jsxs)("a",{className:"card_link",href:h,rel:"noopener noreferrer",target:"_blank",children:[Object(a.jsx)("img",{className:"card__picture",src:m,alt:e.card.title}),Object(a.jsx)("p",{className:"card__date",children:function(e){var t=e.slice(0,4),n=e.slice(5,7);return e.slice(8,10)+" "+n.replace("01","\u042f\u043d\u0432\u0430\u0440\u044f").replace("02","\u0424\u0435\u0432\u0440\u0430\u043b\u044f").replace("03","\u041c\u0430\u0440\u0442\u0430").replace("04","\u0410\u043f\u0440\u0435\u043b\u044f").replace("05","\u041c\u0430\u044f").replace("06","\u0418\u044e\u043d\u044f").replace("07","\u0418\u044e\u043b\u044f").replace("08","\u0410\u0432\u0433\u0443\u0441\u0442\u0430").replace("09","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f").replace("10","\u041e\u043a\u0442\u044f\u0431\u0440\u044f").replace("11","\u041d\u043e\u044f\u0431\u0440\u044f").replace("12","\u0414\u0435\u043a\u0430\u0431\u0440\u044f")+", "+t}(O)}),Object(a.jsx)("h2",{className:"card__title",children:e.card.title}),Object(a.jsx)("p",{className:"card__text",children:j}),Object(a.jsx)("p",{className:"card__source",children:f})]}),Object(a.jsx)("p",{className:"card__tag",children:_}),"/news-explorer-frontend"===b?Object(a.jsx)("button",{className:"card__button card__button_save"+(o?" card__button_save_active":""),onClick:g,onMouseEnter:x,onMouseLeave:x}):Object(a.jsx)("button",{className:"card__button card__button_delete",onClick:g,onMouseEnter:x,onMouseLeave:x}),l&&e.isLogin&&"/saved-news"===b&&Object(a.jsx)("p",{className:"card__button-label",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445"}),l&&!e.isLogin&&Object(a.jsx)("p",{className:"card__button-label",children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u0438"})]})};var x=function(e){return Object(a.jsx)("ul",{className:"card-list",children:e.cards.map((function(t,n){return Object(a.jsx)(g,{card:t,keyword:e.keyword,onSaveArticle:e.onSaveArticle,onDeleteArticle:e.onDeleteArticle,isLogin:e.isLogin},n)}))})};var v=function(){return Object(a.jsx)("i",{className:"circle-preloader"})},k=n.p+"static/media/not-found.39241ac1.svg";var w=function(e){var t=Object(r.useState)(3),n=Object(d.a)(t,2),o=n[0],c=n[1],s=e.searchResult.filter((function(e){return e.urlToImage})),i=s.slice(0,0+o),l=0!==s.length,u=!(0!==s.length||!e.isSearchCompleted);return Object(a.jsx)(a.Fragment,{children:(l||e.isRenderLoading||u)&&Object(a.jsxs)("div",{className:"search-result",children:[e.isRenderLoading&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v,{}),Object(a.jsx)("p",{className:"search-result__subtitle",children:"\u0418\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439..."})]}),l&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{className:"search-result__title",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"}),Object(a.jsx)(x,{cards:i,keyword:e.keyword,onSaveArticle:e.onSaveArticle,onDeleteArticle:e.onDeleteArticle,isLogin:e.isLogin}),i.length<s.length&&Object(a.jsx)("button",{className:"search-result__more_button",type:"button",onClick:function(){c(o+3)},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451"})]}),u&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{className:"search-result__img_not-result",src:k,alt:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),Object(a.jsx)("h2",{className:"search-result__title_not-result",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),Object(a.jsx)("p",{className:"search-result__subtitle",children:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."})]})]})})};var N=function(e){return Object(a.jsxs)("main",{className:"main",children:[Object(a.jsx)(f,{onGetArticles:e.onGetArticles}),Object(a.jsx)(w,{searchResult:e.searchResult,isSearchCompleted:e.isSearchCompleted,keyword:e.keyword,onSaveArticle:e.onSaveArticle,onDeleteArticle:e.onDeleteArticle,isRenderLoading:e.isRenderLoading,isLogin:e.isLogin}),Object(a.jsx)(O,{})]})},S=n.p+"static/media/github-icon.618ae51c.svg",y=n.p+"static/media/facebook-icon.d5ca0b9c.svg";var C=function(){return Object(a.jsxs)("footer",{className:"footer",children:[Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Supersite, Powered by News API"}),Object(a.jsxs)("nav",{className:"footer__nav",children:[Object(a.jsxs)("div",{className:"footer__nav-wrapper",children:[Object(a.jsx)(i.b,{className:"footer__link",to:"/news-explorer-frontend",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(a.jsx)("a",{className:"footer__link",href:"https://praktikum.yandex.ru",rel:"noopener noreferrer",target:"_blank",children:"\u042f\u043d\u0434\u0435\u043a\u0441 \u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})]}),Object(a.jsxs)("div",{className:"footer__nav-wrapper",children:[Object(a.jsx)("a",{className:"footer__social-link",href:"https://github.com",rel:"noopener  noreferrer",target:"_blank",children:Object(a.jsx)("img",{className:"footer__social-link-img",src:S,alt:"\u0418\u043a\u043e\u043d\u043a\u0430 GitHub"})}),Object(a.jsx)("a",{className:"footer__social-link",href:"https://www.facebook.com",rel:"noopener noreferrer",target:"_blank",children:Object(a.jsx)("img",{className:"footer__social-link-img",src:y,alt:"\u0418\u043a\u043e\u043d\u043a\u0430 Facebook"})})]})]})]})};var L=function(e){var t=e.savedArticles.length,n=Object(r.useContext)(b);return Object(a.jsxs)("div",{className:"saved-news-header",children:[Object(a.jsx)("p",{className:"saved-news-header__sub-title",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"}),Object(a.jsxs)("h1",{className:"saved-news-header__title",children:[n.name,", \u0443 \u0432\u0430\u0441 ",t,1===t?" \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u0430\u044f":" \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445",1===t?" \u0441\u0442\u0430\u0442\u044c\u044f":t<=4?" \u0441\u0442\u0430\u0442\u044c\u0438":" \u0441\u0442\u0430\u0442\u0435\u0439"]}),e.sortedKeywords.length>0&&Object(a.jsxs)("p",{className:"saved-news-header__info",children:["\u041f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c:",Object(a.jsxs)("span",{className:"saved-news-header__info-bold",children:["\xa0",e.sortedKeywords[0],e.sortedKeywords.length>1&&", "+e.sortedKeywords[1],"\xa0"]}),e.sortedKeywords.length>2&&Object(a.jsxs)(a.Fragment,{children:["\u0438",Object(a.jsxs)("span",{className:"saved-news-header__info-bold",children:["\xa0",e.sortedKeywords.length-2,"-",3===e.sortedKeywords.length?"\u043c\u0443":"\u043c","\xa0"]}),3===e.sortedKeywords.length?"\u0434\u0440\u0443\u0433\u043e\u043c\u0443":"\u0434\u0440\u0443\u0433\u0438\u043c"]})]})]})};var A=function(e){return Object(r.useEffect)((function(){e.getSavedArticles()}),[]),Object(a.jsxs)("main",{className:"saved-news",children:[Object(a.jsx)(L,{savedArticles:e.savedArticles,sortedKeywords:e.sortedKeywords}),Object(a.jsx)(x,{cards:e.savedArticles,onDeleteArticle:e.onDeleteArticle,isLogin:e.isLogin})]})};var E=function(e){var t;return(e.isPopupForSignupOpen||e.isPopupForLoginOpen)&&(t="popup_opened"),Object(a.jsx)("section",{className:"popup popup_for_".concat(e.name," ").concat(t),onClick:e.onOverlayClick,children:Object(a.jsxs)("form",{id:"form_for_".concat(e.name),className:"popup__form",action:"#",method:"POST",noValidate:!0,onSubmit:e.onSubmit,children:[Object(a.jsx)("button",{className:"popup__close-button",type:"button",onClick:e.onClose}),Object(a.jsx)("h2",{className:"popup__title",children:e.title}),Object(a.jsxs)("fieldset",{className:"popup__fieldset",children:[Object(a.jsx)("span",{className:"popup__input-label",children:"Email"}),Object(a.jsx)("input",{className:"popup__input popup__input_email",type:"email",name:"email",onChange:e.onChange,value:e.values.email||"",autoComplete:"email",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",pattern:"([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})"}),e.errors.email&&Object(a.jsx)("span",{className:"popup__input-error-text",children:e.errors.email}),Object(a.jsx)("span",{className:"popup__input-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(a.jsx)("input",{className:"popup__input popup__input_password",type:"password",name:"password",onChange:e.onChange,value:e.values.password||"",autoComplete:"current-password",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",maxLength:"32",minLength:"8"}),e.errors.password&&Object(a.jsx)("span",{className:"popup__input-error-text",children:e.errors.password}),e.isPopupForSignupOpen&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{className:"popup__input-label",children:"\u0418\u043c\u044f"}),Object(a.jsx)("input",{className:"popup__input popup__input_name",type:"text",name:"name",onChange:e.onChange,value:e.values.name||"",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0438\u043c\u044f",pattern:"[\u0430-\u044f\u0410-\u042fa-zA-Z]{2,20}",maxLength:"20",minLength:"2"}),e.errors.name&&Object(a.jsx)("span",{className:"popup__input-error-text",children:e.errors.name})]}),Object(a.jsx)("span",{className:"popup__input-error-text popup__auth-error-text"+(e.submitError?" popup__auth-error-text_active":""),children:e.submitError})]}),Object(a.jsx)("button",{className:"popup__submit-button",type:"submit",defaultValue:e.buttonName,disabled:!e.isValid,children:e.buttonName}),Object(a.jsxs)("div",{className:"popup__link-wrapper",children:[Object(a.jsx)("span",{children:"\u0438\u043b\u0438"}),Object(a.jsx)("button",{className:"popup__link-button",type:"button",onClick:e.onButtonClick,children:e.buttonLink})]})]})})};var P=function(e){return Object(a.jsx)(E,{title:"\u0412\u0445\u043e\u0434",name:"login",inputId:"login",isPopupForLoginOpen:e.isPopupForLoginOpen,onClose:e.onClose,buttonName:"\u0412\u043e\u0439\u0442\u0438",buttonLink:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onButtonClick:e.onPopupForSignup,inputNameClass:"popup__input-name-wrapper_hidden",onOverlayClick:e.onOverlayClick,onSubmit:e.onSubmit,isValid:e.isValid,onChange:e.onChange,values:e.values,errors:e.errors,submitError:e.submitError})};var F=function(e){return Object(a.jsx)(E,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",name:"signup",inputId:"signup",isPopupForSignupOpen:e.isPopupForSignupOpen,onClose:e.onClose,buttonName:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",buttonLink:"\u0412\u043e\u0439\u0442\u0438",onButtonClick:e.onPopupForLogin,inputNameClass:"popup__input-name-wrapper_active",onOverlayClick:e.onOverlayClick,onSubmit:e.onSubmit,isValid:e.isValid,onChange:e.onChange,values:e.values,errors:e.errors,submitError:e.submitError})};var D=function(e){var t;return e.isOpen&&(t="popup_opened"),Object(a.jsx)("section",{className:"popup popup_info-tip ".concat(t),onClick:e.onOverlayClick,children:Object(a.jsxs)("div",{className:"popup__form popup__form-info-tip",children:[Object(a.jsx)("button",{className:"popup__close-button",type:"button",onClick:e.onClose}),Object(a.jsx)("h2",{className:"popup__title",children:e.infoTipText}),!e.isLogin&&Object(a.jsx)("button",{className:"popup__link-button-info-tip",type:"button",onClick:function(){e.onClose(),e.onPopupForLogin()},children:"\u0412\u043e\u0439\u0442\u0438"})]})})},B=n(20),I=n(21),T="https://news-explorer-api.onrender.com",H=function(){function e(){Object(B.a)(this,e),this._currentDate=new Date,this._initialDate=new Date,this._initialDate.setDate(this._initialDate.getDate()-7),this._formatDate=function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}return Object(I.a)(e,[{key:"_fetch",value:function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}},{key:"getArticles",value:function(e){return this._fetch("".concat("https://nomoreparties.co/news/v2/everything?","q=").concat(e,"&from=").concat(this._formatDate(this._initialDate),"&to=").concat(this._formatDate(this._currentDate),"&sortBy=publishedAt&pageSize=100&apiKey=").concat("68f1c98bd386460cb603e368a24a99b3"," "),{method:"GET"})}}]),e}(),K=n(22),R=function(e){var t=e.component,n=Object(K.a)(e,["component"]),o=localStorage.getItem("isLogin");return Object(r.useEffect)((function(){n.isLogin||o||n.onPopupForSignup()})),Object(a.jsx)(p.b,{children:function(){return n.isLogin||o?Object(a.jsx)(t,Object(u.a)({},n)):Object(a.jsx)(p.a,{to:"/news-explorer-frontend"})}})};n(34);var M=function(){var e=Object(p.g)(),t=new H,n=Object(p.h)().pathname,o=Object(r.useState)(!1),c=Object(d.a)(o,2),s=c[0],i=c[1],j=Object(r.useState)({}),h=Object(d.a)(j,2),_=h[0],O=h[1],f=Object(r.useState)(),g=Object(d.a)(f,2),x=g[0],v=g[1],k=Object(r.useState)(!1),w=Object(d.a)(k,2),S=w[0],y=w[1],L=Object(r.useState)(!1),E=Object(d.a)(L,2),B=E[0],I=E[1],K=Object(r.useState)(!1),M=Object(d.a)(K,2),V=M[0],G=M[1],z=Object(r.useState)(!1),J=Object(d.a)(z,2),q=J[0],W=J[1],Y=Object(r.useState)([]),U=Object(d.a)(Y,2),Z=U[0],$=U[1],Q=Object(r.useState)([]),X=Object(d.a)(Q,2),ee=X[0],te=X[1],ne=Object(r.useState)([]),ae=Object(d.a)(ne,2),re=ae[0],oe=ae[1],ce=Object(r.useState)(!1),se=Object(d.a)(ce,2),ie=se[0],le=se[1],ue=Object(r.useState)(),de=Object(d.a)(ue,2),pe=de[0],be=de[1],je=Object(r.useState)(!1),he=Object(d.a)(je,2),me=he[0],_e=he[1],Oe=Object(r.useState)(""),fe=Object(d.a)(Oe,2),ge=fe[0],xe=fe[1],ve=Object(r.useState)({}),ke=Object(d.a)(ve,2),we=ke[0],Ne=ke[1],Se=Object(r.useState)({}),ye=Object(d.a)(Se,2),Ce=ye[0],Le=ye[1],Ae=Object(r.useState)(!1),Ee=Object(d.a)(Ae,2),Pe=Ee[0],Fe=Ee[1],De=Object(r.useState)(""),Be=Object(d.a)(De,2),Ie=Be[0],Te=Be[1],He=function(e){var t=e.target,n=t.name,a=t.value;Ne(Object(u.a)(Object(u.a)({},we),{},Object(l.a)({},n,a))),Le(Object(u.a)(Object(u.a)({},Ce),{},Object(l.a)({},n,t.validationMessage))),Fe(t.closest("form").checkValidity())},Ke=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Ne(e),Le(t),Fe(n),Te(a)}),[Ne,Le,Fe,Te]);function Re(){y(!1),I(!1),G(!1),W(!1),document.removeEventListener("keydown",Me)}function Me(e){"Escape"===e.key&&Re()}function Ve(){Ke(),I(!0),y(!1),document.addEventListener("keydown",Me)}function Ge(){G(!0),document.addEventListener("keydown",Me)}function ze(){Ke(),I(!1),y(!0),document.addEventListener("keydown",Me)}function Je(e){e.target.classList.contains("popup")&&Re()}function qe(){(function(e){return fetch("".concat(T,"/articles"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return e}))})(localStorage.getItem("token")).then((function(e){return te(e),e})).then((function(e){var t=e.map((function(e){return e.keyword})).reduce((function(e,t){return e[t]?e[t]+=1:e[t]=1,e}),{}),n=Object.keys(t).sort((function(e,n){return t[n]-t[e]}));oe(n)})).catch((function(e){console.error(e)}))}function We(e){(function(e,t){return fetch("".concat(T,"/articles/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return e}))})(localStorage.getItem("token"),e).then((function(){qe()})).catch((function(e){console.error(e)}))}function Ye(e){(function(e){var t=e.password,n=e.email;return fetch("".concat(T,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:n})}).then((function(e){return e.json()})).then((function(e){return e}))})({email:e.email,password:e.password}).then((function(e){if(e.token&&(localStorage.setItem("token",e.token),localStorage.setItem("isLogin",!0),O({email:e.email,name:e.name,_id:e._id}),i(!0),xe("\u0412\u0445\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d!")),e.message)throw Te(e.message),new Error})).then((function(){Re()})).then((function(){Ge()})).catch((function(e){return console.log(e)}))}function Ue(e){(function(e){var t=e.password,n=e.email,a=e.name;return fetch("".concat(T,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:n,name:a})}).then((function(e){return e.json()})).then((function(e){return e}))})({password:e.password,email:e.email,name:e.name}).then((function(e){if(e.email&&xe("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),e.message)throw Te(e.message),new Error})).then((function(){Re()})).then((function(){Ge()})).catch((function(e){console.log(e)}))}function Ze(){var e=localStorage.getItem("token");e&&function(e){return fetch("".concat(T,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return e}))}(e).then((function(e){e&&(O({email:e.email,name:e.name,_id:e._id}),i(!0))}))}function $e(e){e.preventDefault(),B&&Ue({password:we.password,email:we.email,name:we.name}),S&&Ye({password:we.password,email:we.email})}return Object(r.useEffect)((function(){var e=localStorage.getItem("savedSearchResult"),t=localStorage.getItem("currentKeyword");e&&t&&($(JSON.parse(e)),be(t))}),[localStorage]),Object(r.useEffect)((function(){Ze()}),[localStorage]),Object(r.useEffect)((function(){!function(e){"/saved-news"===e&&v(!0),"/news-explorer-frontend"===e&&v(!1)}(n)}),[n]),Object(a.jsx)(b.Provider,{value:_,children:Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)(m,{isLogin:s,isHeaderBlack:x,onPopupForSignup:Ve,onLogout:function(){i(!1),localStorage.removeItem("token"),localStorage.removeItem("isLogin"),localStorage.removeItem("currentKeyword"),localStorage.removeItem(Z),e.push("/news-explorer-frontend")},isMobilePopupOpen:q,onMobilePopupOpen:function(){W(!0)}}),Object(a.jsxs)(p.d,{children:[Object(a.jsx)(p.b,{path:"/news-explorer-frontend",children:Object(a.jsx)(N,{onSaveArticle:function(e){(function(e,t){return fetch("".concat(T,"/articles"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({keyword:t.keyword,title:t.title,text:t.text,date:t.date,source:t.source,image:t.image,link:t.link})}).then((function(e){return e.json()})).then((function(e){return e}))})(localStorage.getItem("token"),e).catch((function(e){console.error(e)}))},onDeleteArticle:We,onGetArticles:function(e){var n=e[0].toUpperCase()+e.slice(1);_e(!0),t.getArticles(n).then((function(e){$(e.articles),be(n),localStorage.setItem("savedSearchResult",JSON.stringify(e.articles)),localStorage.setItem("currentKeyword",n),le(!0)})).catch((function(e){console.error(e),xe("\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437"),Ge()})).finally((function(){_e(!1)}))},searchResult:Z,isSearchCompleted:ie,keyword:pe,isRenderLoading:me,isLogin:s})}),Object(a.jsx)(R,{path:"/saved-news",component:A,isLogin:s,onPopupForSignup:Ve,savedArticles:ee,sortedKeywords:re,getSavedArticles:qe,onDeleteArticle:We})]}),Object(a.jsx)(C,{}),Object(a.jsx)(P,{isPopupForLoginOpen:S,onClose:Re,onPopupForSignup:Ve,onOverlayClick:Je,onSubmit:$e,isValid:Pe,onChange:He,values:we,errors:Ce,submitError:Ie}),Object(a.jsx)(F,{isPopupForSignupOpen:B,onClose:Re,onPopupForLogin:ze,onSubmit:$e,onOverlayClick:Je,isValid:Pe,onChange:He,values:we,errors:Ce,submitError:Ie}),Object(a.jsx)(D,{isLogin:s,infoTipText:ge,isOpen:V,onClose:Re,onPopupForLogin:ze,onOverlayClick:Je})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(i.a,{children:Object(a.jsx)(M,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.404aac86.chunk.js.map